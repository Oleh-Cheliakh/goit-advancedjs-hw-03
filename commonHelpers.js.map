{"version":3,"file":"commonHelpers.js","sources":["../src/api/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\n// API personal key\naxios.defaults.headers.common['x-api-key'] =\n  'live_pT8vod6SPuMDUj6AprUg0TPq3KAfICEEzDfWkD2UaZt3zafba4uyWLTK5IrrVsmz';\n\n// API request for all breeds names and ids\nexport function fetchBreeds() {\n  // Create empty array in order to collect API answer\n  const catBreeds = [];\n\n  // Initialize API get request to Cat API\n  return axios({\n    method: 'get',\n    url: 'https://api.thecatapi.com/v1/breeds',\n  }).then(({ data }) => {\n    // Saves names and ids of breed to array\n    data.forEach(({ id, name }) => {\n      catBreeds.push({\n        id,\n        name,\n      });\n    });\n    // Return array with names and ids of breeds\n    return catBreeds;\n  });\n}\n\n// API request in order to get breed image and info by breed id\nexport function fetchCatByBreed(breedId) {\n  return axios({\n    method: 'get',\n    url: 'https://api.thecatapi.com/v1/images/search',\n    params: {\n      breed_ids: breedId,\n    },\n  }).then(({ data }) => {\n    return {\n      image: data[0].url,\n      description: data[0].breeds[0].description,\n      name: data[0].breeds[0].name,\n      temperament: data[0].breeds[0].temperament,\n    };\n  });\n}\n","// Imported API fetch functions\nimport { fetchBreeds, fetchCatByBreed } from './api/cat-api';\n\n// Pop up messages library\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Pick loader and selector elements\nconst optionSelecter = document.querySelector('.breed-select');\nconst loaderElement = document.querySelector('.loader');\n\n// Initialize request to API in order to receive breeds names and generate options for selector\naddOptions();\n\n// Adds event listener to selector changes\noptionSelecter.addEventListener('change', event => {\n  handleBreedChange(event.target.value);\n});\n\n// Add options to selector after API sends breed names\nfunction addOptions() {\n  // Get breeds names and ids\n  fetchBreeds()\n    .then(data => {\n      // Create markup for options\n      const selectorMarkup = data\n        .map(breed => `<option value=${breed.id}>${breed.name}</option>`)\n        .join('');\n\n      // Adds markup with options to selector\n      optionSelecter.insertAdjacentHTML('beforeend', selectorMarkup);\n\n      // Creates custom selector\n      new SlimSelect({\n        select: optionSelecter,\n        settings: {\n          placeholderText: 'Select breed',\n        },\n      });\n\n      //Shows selector and hides loader\n      optionSelecter.classList.remove('hidden');\n      loaderElement.classList.add('hidden');\n    })\n    .catch(error => {\n      // Shows error message in pop up\n      iziToast.show({\n        message: '❌ Oops! Something went wrong! Try reloading the page!',\n        color: 'red',\n        position: 'topCenter',\n        transitionIn: 'fadeInDown',\n      });\n\n      //Hides loader after receiving an error\n      loaderElement.classList.add('hidden');\n    });\n}\n\n// Invokes after selector changes\nfunction handleBreedChange(breedId) {\n  //Pick container for cat info\n  const catInfoElement = document.querySelector('.cat-info');\n\n  //Clear container before request\n  catInfoElement.innerHTML = '';\n\n  //Shows loader once API request starts\n  loaderElement.classList.remove('hidden');\n\n  //Initiate request about breed info by given ID\n  fetchCatByBreed(breedId)\n    .then(({ image, description, name, temperament }) => {\n      // Insert markup with cat's breed image and info into container\n      catInfoElement.insertAdjacentHTML(\n        'afterbegin',\n        `<img class=\"cat-info-image\" src=\"${image}\" alt=\"Cat of ${name} breed\" width=\"300\" height=\"300\" />\n      <div class=\"cat-info-text\">\n        <h1>${name}</h1>\n        <p>${description}</p>\n        <p><b>Temperament:</b> ${temperament}</p>\n      </div>`\n      );\n      // Hides loader after receiving an answer\n      loaderElement.classList.add('hidden');\n    })\n    .catch(error => {\n      // Shows error message in pop up window\n      iziToast.show({\n        message: '❌ Oops! Something went wrong! Try reloading the page!',\n        color: 'red',\n        position: 'topCenter',\n        transitionIn: 'fadeInDown',\n      });\n      // Hides loader after receiving an error\n      loaderElement.classList.add('hidden');\n    });\n}\n"],"names":["axios","fetchBreeds","catBreeds","data","id","name","fetchCatByBreed","breedId","optionSelecter","loaderElement","addOptions","event","handleBreedChange","selectorMarkup","breed","error","iziToast","catInfoElement","image","description","temperament"],"mappings":"6vBAGAA,EAAM,SAAS,QAAQ,OAAO,WAAW,EACvC,wEAGK,SAASC,GAAc,CAE5B,MAAMC,EAAY,CAAA,EAGlB,OAAOF,EAAM,CACX,OAAQ,MACR,IAAK,qCACN,CAAA,EAAE,KAAK,CAAC,CAAE,KAAAG,MAETA,EAAK,QAAQ,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAI,IAAO,CAC7BH,EAAU,KAAK,CACb,GAAAE,EACA,KAAAC,CACR,CAAO,CACP,CAAK,EAEMH,EACR,CACH,CAGO,SAASI,EAAgBC,EAAS,CACvC,OAAOP,EAAM,CACX,OAAQ,MACR,IAAK,6CACL,OAAQ,CACN,UAAWO,CACZ,CACF,CAAA,EAAE,KAAK,CAAC,CAAE,KAAAJ,MACF,CACL,MAAOA,EAAK,CAAC,EAAE,IACf,YAAaA,EAAK,CAAC,EAAE,OAAO,CAAC,EAAE,YAC/B,KAAMA,EAAK,CAAC,EAAE,OAAO,CAAC,EAAE,KACxB,YAAaA,EAAK,CAAC,EAAE,OAAO,CAAC,EAAE,WACrC,EACG,CACH,CCpCA,MAAMK,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAgB,SAAS,cAAc,SAAS,EAGtDC,IAGAF,EAAe,iBAAiB,SAAUG,GAAS,CACjDC,EAAkBD,EAAM,OAAO,KAAK,CACtC,CAAC,EAGD,SAASD,GAAa,CAEpBT,EAAa,EACV,KAAKE,GAAQ,CAEZ,MAAMU,EAAiBV,EACpB,IAAIW,GAAS,iBAAiBA,EAAM,EAAE,IAAIA,EAAM,IAAI,WAAW,EAC/D,KAAK,EAAE,EAGVN,EAAe,mBAAmB,YAAaK,CAAc,EAG7D,IAAI,WAAW,CACb,OAAQL,EACR,SAAU,CACR,gBAAiB,cAClB,CACT,CAAO,EAGDA,EAAe,UAAU,OAAO,QAAQ,EACxCC,EAAc,UAAU,IAAI,QAAQ,CAC1C,CAAK,EACA,MAAMM,GAAS,CAEdC,EAAS,KAAK,CACZ,QAAS,wDACT,MAAO,MACP,SAAU,YACV,aAAc,YACtB,CAAO,EAGDP,EAAc,UAAU,IAAI,QAAQ,CAC1C,CAAK,CACL,CAGA,SAASG,EAAkBL,EAAS,CAElC,MAAMU,EAAiB,SAAS,cAAc,WAAW,EAGzDA,EAAe,UAAY,GAG3BR,EAAc,UAAU,OAAO,QAAQ,EAGvCH,EAAgBC,CAAO,EACpB,KAAK,CAAC,CAAE,MAAAW,EAAO,YAAAC,EAAa,KAAAd,EAAM,YAAAe,CAAW,IAAO,CAEnDH,EAAe,mBACb,aACA,oCAAoCC,CAAK,iBAAiBb,CAAI;AAAA;AAAA,cAExDA,CAAI;AAAA,aACLc,CAAW;AAAA,iCACSC,CAAW;AAAA,aAE5C,EAEMX,EAAc,UAAU,IAAI,QAAQ,CAC1C,CAAK,EACA,MAAMM,GAAS,CAEdC,EAAS,KAAK,CACZ,QAAS,wDACT,MAAO,MACP,SAAU,YACV,aAAc,YACtB,CAAO,EAEDP,EAAc,UAAU,IAAI,QAAQ,CAC1C,CAAK,CACL"}